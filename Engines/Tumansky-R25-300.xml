<?xml version="1.0"?>


<!--
      [1] - JSBSim uses the bypassratio as a measure of spool up time only.
      The MiG-21's engines were jet turbine engines, and therefore had an actual bypass ratio of 0.
      According to HAVE DOUGHNUT, page 1-8 section F, the R-11F-300 engine required 14 seconds
      to spool up from idle to milthrust. Assuming the R-25 is considerably improved, a spool up
      time of 9 seconds seems reasonable.
-->

<!--
       [2] - info gleaned from mig-21bis pilot flight operating instruction (blue cover)
-->


<turbine_engine name="Tumansky R-25-300">
  <milthrust>    9050.0 </milthrust> <!-- max milthrust, 4100 kgf per page 5, line (a) [2] -->
  <maxthrust>   15100.0 </maxthrust> <!-- max thrust without second reheat, 6850 kgf per page 5, line (a) [2] -->
  <tsfc>            0.96</tsfc> <!-- source - wikipedia :( -->
  <atsfc>           2.25</atsfc> <!-- source - wikipedia :( this is without second reheat -->
  <bleed>           0.03</bleed>
  <idlen1>         35.0 </idlen1>
  <idlen2>         50.0 </idlen2>
  <maxn1>         103.5 </maxn1> <!-- page 25, powerpland (in flight), line 15(b) [2] -->
  <maxn2>         107.5 </maxn2> <!-- page 25, powerpland (in flight), line 16 [2] -->
  <augmented>         1 </augmented>
  <augmethod>         2 </augmethod>
  <injected>          0 </injected>
  <injection-time> 0.0 </injection-time>

  <!-- returned value is % per second -->

  <function name="N1SpoolUp">
    <table>
      <independentVar lookup="row">/engines/engine[0]/n1</independentVar>
      <tableData>
        30  18
        50  26
        70  35
        90  40
        105 50
      </tableData>
    </table>
  </function>

  <function name="N1SpoolDown">
    <table>
      <independentVar lookup="row">/engines/engine[0]/n1</independentVar>
      <tableData>
        30  18
        50  24
        70  30
        90  35
        105 45
      </tableData>
    </table>
  </function>

  <function name="N2SpoolUp">
    <table>
      <independentVar lookup="row">/engines/engine[0]/n2</independentVar>
      <tableData>
        30  1.8
        50  3.7
        70  7.2
        90  11
        105 12
      </tableData>
    </table>
  </function>

  <function name="N2SpoolDown">
    <table>
      <independentVar lookup="row">/engines/engine[0]/n2</independentVar>
      <tableData>
        30  1.8
        50  3.7
        70  7.2
        90  11
        105 12
      </tableData>
    </table>
  </function>

  <function name="IdleThrust">
   <table>
    <independentVar lookup="row">velocities/mach</independentVar>
    <independentVar lookup="column">atmosphere/density-altitude</independentVar>
    <tableData>
         -10000     0     10000   20000   30000   40000   50000   90000
     0.0  0.0430  0.0488  0.0528  0.0694  0.0899  0.1183  0.1467  0
     0.2  0.0500  0.0501  0.0335  0.0544  0.0797  0.1049  0.1342  0
     0.4  0.0040  0.0047  0.0020  0.0272  0.0595  0.0891  0.1203  0
     0.6 -0.0804 -0.0804 -0.0560 -0.0237  0.0276  0.0718  0.1073  0
     0.8 -0.2129 -0.2129 -0.1498 -0.1025  0.0474  0.0868  0.0900  0
     1.0 -0.2839 -0.2839 -0.1104 -0.0469 -0.0270  0.0552  0.0800  0
    </tableData>
   </table>
  </function>

  <function name="MilThrust">
    <product>
       <table>
        <independentVar lookup="row">velocities/mach</independentVar>
        <independentVar lookup="column">atmosphere/density-altitude</independentVar>
        <tableData>
              -10000    0         10000     20000   30000   40000   50000   60000   90000
          0   1.2348    0.95      0.7104    0.534   0.4092  0.2892  0.1639  0.0638  0
          0.2 1.145816  0.88597   0.668064  0.5052  0.38995 0.27672 0.15708 0.04389 0
          0.4 1.12357   0.87229   0.662304  0.5044  0.39149 0.27876 0.15906 0.04719 0
          0.6 1.15199   0.89927   0.688992  0.5295  0.41393 0.29628 0.16863 0.05148 0
          0.8 1.225294  0.963015  0.746112  0.5784  0.45584 0.32796 0.1859  0.05797 0
          1.0 1.33133   1.05583   0.829728  0.646   0.51843 0.37512 0.21285 0.06875 0
          1.2 1.441874  1.15767   0.92736   0.7371  0.594   0.43272 0.24519 0.08063 0
          1.4 1.545362  1.25932   1.031328  0.8359  0.68332 0.50328 0.28622 0.0979  0

        </tableData>
       </table>

       <!-- if not /engines/engine[0]/augmentation and nozzle position is open, severely hamper the mil thrust -->
       <ifthen>
            <and>
                <eq>
                    <property>/engines/engine[0]/augmentation</property>
                    <value>0</value>
                </eq>
                <eq>
                    <property>propulsion/engine[0]/nozzle-pos-norm-corrected</property>
                    <value>1</value>
                </eq>
                <gt>
                    <property>fcs/throttle-redist-mil</property>
                    <value>0.1</value>
                </gt>
            </and>
            <value>0.1</value>
            <value>1</value>
        </ifthen>
    </product>
  </function>

	<function name="AugThrust">
		<product>
			<table>
				<independentVar lookup="row">velocities/mach</independentVar>
				<independentVar lookup="column">atmosphere/density-altitude</independentVar>
				<tableData>
           -10000       0   10000   20000   30000   40000   50000   60000
     0.0    1.1816  1.0000  0.8184  0.6627  0.5280  0.3756  0.2327  0
     0.2    1.1308  0.9599  0.7890  0.6406  0.5116  0.3645  0.2258  0
     0.4    1.1150  0.9474  0.7798  0.6340  0.5070  0.3615  0.2240  0
     0.6    1.1284  0.9589  0.7894  0.6420  0.5134  0.3661  0.2268  0
     0.8    1.1707  0.9942  0.8177  0.6647  0.5309  0.3784  0.2345  0
     1.0    1.2411  1.0529  0.8648  0.7017  0.5596  0.3983  0.2467  0
     1.2    1.3287  1.1254  0.9221  0.7462  0.5936  0.4219  0.2614  0
     1.4    1.4365  1.2149  0.9933  0.8021  0.6360  0.4509  0.2794  0
     1.6    1.5711  1.3260  1.0809  0.8700  0.6874  0.4860  0.3011  0
     1.8    1.7301  1.4579  1.1857  0.9512  0.7495  0.5289  0.3277  0
     2.0    1.8314  1.5700  1.3086  1.0474  0.8216  0.5786  0.3585  0
     2.2    1.9700  1.6900  1.4100  1.2400  0.9100  0.6359  0.3940  0
     2.4    2.0700  1.8000  1.5300  1.3400  1.0000  0.7200  0.4600  0
     2.6    2.2000  1.9200  1.6400  1.4400  1.1000  0.8000  0.5200  0
				</tableData>
			</table>
			<table>
				<!-- 7100kg at ~10000 ft, 9900kg at sealevel [2] -->
				<independentVar lookup="row">velocities/mach</independentVar>
				<independentVar lookup="column">atmosphere/density-altitude</independentVar>
				<independentVar lookup="table">propulsion/clr</independentVar>
				<tableData breakPoint="0">
							0			10000		15000
					0.0		1.0			1.0			1.0
					1.0		1			1			1
				</tableData>
				<tableData breakPoint="1">
							-10000		0			6000		10000		15000
					0.0		1.52		1.44		1.30		1.03		1.0
					1.0		1.54		1.46		1.33		1.04		1.0
				</tableData>
			</table>
		</product>
	</function>


</turbine_engine>
